/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","react","@grafana/ui","lodash","@grafana/runtime"],(function(t,e,r,n,o){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=52)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n=r(19),o=r(12),u=r(36),c=r(37),a=Object.prototype,i=a.hasOwnProperty,s=n((function(t,e){t=Object(t);var r=-1,n=e.length,s=n>2?e[2]:void 0;for(s&&u(e[0],e[1],s)&&(n=1);++r<n;)for(var f=e[r],l=c(f),p=-1,y=l.length;++p<y;){var b=l[p],v=t[b];(void 0===v||o(v,a[b])&&!i.call(t,b))&&(t[b]=f[b])}return t}));t.exports=s},function(t,e){t.exports=r},function(t,e,r){var n=r(10),o=r(29),u=r(30),c=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?o(t):u(t)}},function(t,e,r){var n=r(11),o="object"==typeof self&&self&&self.Object===Object&&self,u=n||o||Function("return this")();t.exports=u},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){return t}},function(t,e,r){var n=r(5),o=r(2);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,r){var n=r(6).Symbol;t.exports=n},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(28))},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(9),o=r(14);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,r){var n=r(8),o=r(20),u=r(22);t.exports=function(t,e){return u(o(t,e,n),t+"")}},function(t,e,r){var n=r(21),o=Math.max;t.exports=function(t,e,r){return e=o(void 0===e?t.length-1:e,0),function(){for(var u=arguments,c=-1,a=o(u.length-e,0),i=Array(a);++c<a;)i[c]=u[e+c];c=-1;for(var s=Array(e+1);++c<e;)s[c]=u[c];return s[e]=r(i),n(t,this,s)}}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(23),o=r(35)(n);t.exports=o},function(t,e,r){var n=r(24),o=r(25),u=r(8),c=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:u;t.exports=c},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,r){var n=r(26),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,r){var n=r(27),o=r(34);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},function(t,e,r){var n=r(9),o=r(31),u=r(2),c=r(33),a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,f=i.toString,l=s.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!u(t)||o(t))&&(n(t)?p:a).test(c(t))}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(10),o=Object.prototype,u=o.hasOwnProperty,c=o.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=u.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var o=c.call(t);return n&&(e?t[a]=r:delete t[a]),o}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n,o=r(32),u=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!u&&u in t}},function(t,e,r){var n=r(6)["__core-js_shared__"];t.exports=n},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){var r=Date.now;t.exports=function(t){var e=0,n=0;return function(){var o=r(),u=16-(o-n);if(n=o,u>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){var n=r(12),o=r(13),u=r(15),c=r(2);t.exports=function(t,e,r){if(!c(r))return!1;var a=typeof e;return!!("number"==a?o(r)&&u(e,r.length):"string"==a&&e in r)&&n(r[e],t)}},function(t,e,r){var n=r(38),o=r(49),u=r(13);t.exports=function(t){return u(t)?n(t,!0):o(t)}},function(t,e,r){var n=r(39),o=r(40),u=r(42),c=r(43),a=r(15),i=r(45),s=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=u(t),f=!r&&o(t),l=!r&&!f&&c(t),p=!r&&!f&&!l&&i(t),y=r||f||l||p,b=y?n(t.length,String):[],v=b.length;for(var d in t)!e&&!s.call(t,d)||y&&("length"==d||l&&("offset"==d||"parent"==d)||p&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||a(d,v))||b.push(d);return b}},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e,r){var n=r(41),o=r(7),u=Object.prototype,c=u.hasOwnProperty,a=u.propertyIsEnumerable,i=n(function(){return arguments}())?n:function(t){return o(t)&&c.call(t,"callee")&&!a.call(t,"callee")};t.exports=i},function(t,e,r){var n=r(5),o=r(7);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){(function(t){var n=r(6),o=r(44),u=e&&!e.nodeType&&e,c=u&&"object"==typeof t&&t&&!t.nodeType&&t,a=c&&c.exports===u?n.Buffer:void 0,i=(a?a.isBuffer:void 0)||o;t.exports=i}).call(this,r(16)(t))},function(t,e){t.exports=function(){return!1}},function(t,e,r){var n=r(46),o=r(47),u=r(48),c=u&&u.isTypedArray,a=c?o(c):n;t.exports=a},function(t,e,r){var n=r(5),o=r(14),u=r(7),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,t.exports=function(t){return u(t)&&o(t.length)&&!!c[n(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,r){(function(t){var n=r(11),o=e&&!e.nodeType&&e,u=o&&"object"==typeof t&&t&&!t.nodeType&&t,c=u&&u.exports===o&&n.process,a=function(){try{var t=u&&u.require&&u.require("util").types;return t||c&&c.binding&&c.binding("util")}catch(t){}}();t.exports=a}).call(this,r(16)(t))},function(t,e,r){var n=r(2),o=r(50),u=r(51),c=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return u(t);var e=o(t),r=[];for(var a in t)("constructor"!=a||!e&&c.call(t,a))&&r.push(a);return r}},function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},function(t,e,r){"use strict";r.r(e);var n=r(0),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function u(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var c=function(){return(c=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e,r,n){return new(r||(r=Promise))((function(o,u){function c(t){try{i(n.next(t))}catch(t){u(t)}}function a(t){try{i(n.throw(t))}catch(t){u(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,a)}i((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,o,u,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,n=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){c.label=u[1];break}if(6===u[0]&&c.label<o[1]){c.label=o[1],o=u;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(u);break}o[2]&&c.ops.pop(),c.trys.pop();continue}u=e.call(t,c)}catch(t){u=[6,t],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}var s=r(17),f=r.n(s),l=r(3),p=r.n(l),y=r(18),b={queryText:"show databases;"},v=function(t){function e(e){var r=t.call(this,e)||this;return console.log(e),r.baseUrl=e.url,r}return u(e,t),e.prototype.query=function(t){return a(this,void 0,Promise,(function(){var e,r=this;return i(this,(function(o){return e=t.targets.map((function(t){return a(r,void 0,void 0,(function(){var e,r,o,u,c,a,s,f,l,y,v;return i(this,(function(i){switch(i.label){case 0:return e=p()(t,b),[4,this.request("/rest/sql",e.queryText)];case 1:for(r=i.sent(),console.log(r),o=r.data.column_meta,u=r.data.data,c=r.data.rows,a=o.length,s=[],f=[],y=0;y<a;y++)s.push([]);for(y=0;y<c;y++)for(l=0;l<a;l++)s[l].push(u[y][l]);for(y=0;y<a;y++)v=n.FieldType.other,1==o[y][1]?v=n.FieldType.boolean:2==o[y][1]||3==o[y][1]||4==o[y][1]||5==o[y][1]||6==o[y][1]||7==o[y][1]?v=n.FieldType.number:8==o[y][1]?v=n.FieldType.string:9==o[y][1]?v=n.FieldType.time:10==o[y][1]&&(v=n.FieldType.string),f.push({name:o[y][0],type:v,values:s[y]});return console.log(f),[2,new n.MutableDataFrame({refId:e.refId,fields:f})]}}))}))})),[2,Promise.all(e).then((function(t){return{data:t}}))]}))}))},e.prototype.request=function(t,e){return a(this,void 0,void 0,(function(){return i(this,(function(r){return[2,Object(y.getBackendSrv)().datasourceRequest({url:""+this.baseUrl+t,data:e,method:"POST",headers:{Authorization:"Basic cm9vdDp0YW9zZGF0YQ=="}})]}))}))},e.prototype.testDatasource=function(){return a(this,void 0,void 0,(function(){var t,e,r,n;return i(this,(function(o){switch(o.label){case 0:t="Cannot connect to API",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.request("/rest/login/root/taosdata")];case 2:return 200===(e=o.sent()).status?[2,{status:"success",message:"Success"}]:[2,{status:"error",message:e.statusText?e.statusText:t}];case 3:return r=o.sent(),f.a.isString(r)?[2,{status:"error",message:r}]:(n="",n+=r.statusText?r.statusText:t,r.data&&r.data.error&&r.data.error.code&&(n+=": "+r.data.error.code+". "+r.data.error.message),[2,{status:"error",message:n}]);case 4:return[2]}}))}))},e}(n.DataSourceApi),d=r(1),h=r.n(d),x=r(4),g=x.LegacyForms.FormField,j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onQueryTextChange=function(t){var r=e.props,n=r.onChange,o=r.query;n(c(c({},o),{queryText:t.target.value}))},e}return u(e,t),e.prototype.render=function(){var t=p()(this.props.query,b).queryText;return h.a.createElement("div",{className:"gf-form"},h.a.createElement(g,{labelWidth:20,value:t||"",onChange:this.onQueryTextChange,label:"Query Text",tooltip:"show database"}))},e}(d.PureComponent);r.d(e,"plugin",(function(){return m}));var m=new n.DataSourcePlugin(v).setConfigEditor((function(t){var e=t.onOptionsChange,r=t.options;return h.a.createElement(x.DataSourceHttpSettings,{defaultUrl:"http://127.0.0.1:6041",dataSourceConfig:r,onChange:e})})).setQueryEditor(j)}])}));
//# sourceMappingURL=module.js.map